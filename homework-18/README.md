Docker

Цель домашнего задания

Разобраться с основами docker, с образом, эко системой docker в целом;

Описание домашнего задания:

1. Установите Docker на хост машину
2. Установите Docker Compose - как плагин, или как отдельное приложение
3. Создайте свой кастомный образ nginx на базе alpine. После запуска nginx должен отдавать кастомную страницу (достаточно изменить дефолтную страницу nginx)
4. Определите разницу между контейнером и образом
5. Вывод опишите в домашнем задании.
6. Ответьте на вопрос: Можно ли в контейнере собрать ядро?

Собранный образ необходимо запушить в docker hub и дать ссылку на ваш репозиторий.

Выполнение:

1. На хосте установлен дистрибутив Monjaro, таким образом установку docker произвел с помощью pacman'a:

sudo pacman -Sy docker

2. Аналогично был установлен docker-compose:

sudo pacman -Sy docker-compose

3. Был создан custom образ nginx на базе alpine:latest. Dockerfile и все вспомогательные файлы (конфиг nginx и приветственная html страница) лежат в этом репозитории.

Команда для запуска контейнера:

sudo docker run -p 8080:80 nginx_new:latest &  

По адресу 127.0.0.1:8080 находится новая приветственная страница.

Ссылка на docker образ: https://hub.docker.com/repository/docker/ozon67/nginx_new

Ссылка на репозиторий с файлами ДЗ: https://github.com/mr-kos/linux-admin-2023/tree/main/homework-18

4. Контейнер - это среда выполнения какого либо сервиса или программы, запущенная на основе какого-то образа, т.е контейнер не может существовать без образа, а обратное неверно.

5. Описал.

6. Собрать ядро вполне в контейнере вполне возможно, но загрузится с него не получится, так как сам по себе контейнер - stateless, и изменения, произошедние внутри него после перезапуска откатываются в исходное состояние ( кроме записи в тома ). Кроме этого docker контейнер использует ядро docker хоста, на котором он запущен.

Ссылка на статью по сборке ядра в контейнере: https://mgalgs.io/2021/03/23/how-to-build-a-custom-linux-kernel-for-qemu-using-docker.html
